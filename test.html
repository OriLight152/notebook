<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>无标题文档</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        .t {
            width: 20em;
        }

        .t pre {
            width: 20em;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        #divhidden {
            visibility: hidden;
        }
    </style>
</head>

<body>

    <textarea id="textareas" class="t" onkeyup="autoTextarea()"> </textarea>
    <div class="t" id="divhidden"></div>
    <script language="javascript">
        function autoTextarea() {
            var divhidden = document.getElementById("divhidden");
            var textareas = document.getElementById("textareas");
            var val = textareas.value;
            divhidden.innerHTML = "<pre>" + val + " " + "</pre>";
            textareas.style.height = (divhidden.offsetHeight - 2) + "px";
            if (val == "") {
                textareas.value = " ";
            }
        }
    </script>
</body>

</html>